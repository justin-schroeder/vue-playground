<script src="../node_modules/vue/dist/vue.js"></script>

<script>
  const RulesPlugin = {
    install: function(Vue, options) {
      Vue.mixin({
        created: function() {
          if (this.$options.hasOwnProperty('rules')) {
            Object.keys(this.$options.rules).forEach(key => {
              if (this.hasOwnProperty(key)) {
                const {validate, message} = this.$options.rules[key];
                this.$watch(key, function() {
                  const val = this[key];
                  if (!validate(val)) {
                    window.console.log(message);
                    return false;
                  }
                  return true;
                })
              }
            })
          }
        }
      })
    }
  }

  Vue.use(RulesPlugin)
</script>
